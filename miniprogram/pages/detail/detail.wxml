<!--detail.wxml-->
<view class="container">
  <view class="header">
    <view class="back-btn" bindtap="goBack">â† è¿”å›</view>
  </view>
  
  <!-- äº§å“è¯¦æƒ… -->
  <view wx:if="{{type === 'product' && product}}" class="detail-content">
    <view class="product-title">
      <text class="icon">â˜•</text>
      <text class="name">{{product.name}}</text>
    </view>
    
    <view class="divider"></view>
    
    <view class="total-cost">
      <text>æ€»æˆæœ¬ï¼šÂ¥{{costInfo ? costInfo.totalCost : 0}}</text>
    </view>
    
    <view class="divider"></view>
    
    <view class="cost-details">
      <view class="section-title">æˆæœ¬æ˜ç»†ï¼š</view>
      <view wx:if="{{costInfo && costInfo.details && costInfo.details.length > 0}}">
        <view 
          wx:for="{{costInfo.details}}" 
          wx:key="index"
          class="detail-item"
        >
          <view class="detail-name">
            {{item.materialName}}
            <text class="detail-category">({{item.category === 'material' ? 'åŸæ–™' : 'åŒ…è£…'}})</text>
          </view>
          <view class="detail-calculation">
            {{item.amount}}{{item.unit}} Ã— Â¥{{item.unitPrice}}/{{item.unit}} = Â¥{{item.itemCost}}
          </view>
        </view>
      </view>
      <view wx:else class="no-details">
        <text>æš‚æ— æˆæœ¬æ˜ç»†</text>
      </view>
    </view>
  </view>
  
  <!-- ç‰©æ–™è¯¦æƒ… -->
  <view wx:if="{{type === 'material' && material}}" class="detail-content">
    <view class="material-title">
      <text class="icon">ğŸ¥›</text>
      <text class="name">{{material.name}}</text>
    </view>
    
    <view class="divider"></view>
    
    <view class="spec-info">
      <view class="info-title">è§„æ ¼ä¿¡æ¯ï¼š</view>
      <view class="info-item">
        <text>è§„æ ¼æ•°é‡ï¼š{{material.spec_amount}}{{material.spec_unit}}</text>
      </view>
      <view class="info-item">
        <text>è§„æ ¼ä»·æ ¼ï¼šÂ¥{{material.spec_price}}</text>
      </view>
    </view>
    
    <view class="divider"></view>
    
    <view class="unit-cost">
      <text>å•ä½æˆæœ¬ï¼šÂ¥{{unitPrice}}/{{material.spec_unit}}</text>
    </view>
    
    <view class="divider"></view>
    
    <view class="category">
      <text>åˆ†ç±»ï¼š{{material.category === 'material' ? 'åŸæ–™' : 'åŒ…è£…'}}</text>
    </view>
  </view>
</view>

